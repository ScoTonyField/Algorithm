## 洗牌算法-Shuffle

**如何设计一个公平的洗牌算法**

问题分析：

- **随机算法**

  把所有牌放到一个数组中，每次取两张牌交换位置，随机 k 次即可。但是k应该选取多少？很显然，取一个固定的值不合理。如果数组中有 1000000 个元素，随机 100 次太少；如果数组中只有 10 个元素，随机 10000 次又太多。一个合理的选择是，随机次数和数组中元素大小相关。比如数组有多少个元素，我们就随机多少次。

- **公平：**每张牌独立等概率地出现在任何位置

```java
// Knuth Shuffle
for(int i = n - 1; i >= 0 ; i -- )
    swap(arr[i], arr[rand(0, i)]) // rand(0, i) 生成 [0, i] 之间的随机整数
```

时间复杂度：O(n)

空间复杂度：O(1)

**类似场景：**

- 大小为100的数组，元素是从 1 到 100 按顺序排列，怎样随机的从里面选择 50 个数？
- 一组数，每次不放回抽样，得到一个随机序列